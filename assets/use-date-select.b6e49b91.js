import{v as A,r as l,w as h}from"./vendor.bb11239e.js";function D(t,u){if(t>u)return D(u,t).reverse();const n=[];for(let a=t;a<=u;a++)n.push(a);return n}function C(t,u){return("0".repeat(u-1)+t.toString()).slice(-u)}function w(t,u,n){return A(t,u-1,n)?C(t,4)+"-"+C(u,2)+"-"+C(n,2):null}function v(t){const u=new Date(t),n=u.getFullYear(),a=u.getMonth()+1,c=u.getDate();return isNaN(n)||isNaN(a)||isNaN(c)?{year:"",month:"",day:""}:{year:n.toString(),month:a.toString(),day:c.toString()}}function I(t){return w(t.getFullYear(),t.getMonth()+1,t.getDate())}const O=2e3;function V(t){return parseInt(t)}function y(t){return t.toString()}function R(t){const u=new Date;let n=null;t.defaultYear!=null&&(t.defaultYear==="now"?n=u.getFullYear():typeof t.defaultYear=="number"&&(n=t.defaultYear));let a=null;t.defaultMonth!=null&&(t.defaultMonth==="now"?a=u.getMonth()+1:typeof t.defaultMonth=="number"&&(a=t.defaultMonth));let c=null;return t.defaultDay!=null&&(t.defaultDay==="now"?c=u.getDate():typeof t.defaultDay=="number"&&(c=t.defaultDay)),{defaultYear:n,defaultMonth:a,defaultDay:c}}const _=(t,u,n={})=>{const[a,c]=l.exports.useState(()=>{const{defaultYear:e,defaultMonth:r,defaultDay:o}=R(n);return{yearValue:e?y(e):"",monthValue:r?y(r):"",dayValue:o?y(o):"",dateString:null,changeCount:0}}),f=l.exports.useCallback(({year:e,month:r,day:o})=>{c(s=>{const g=e!=null?e:s.yearValue,b=r!=null?r:s.monthValue,M=o!=null?o:s.dayValue,N=w(V(g),V(b),V(M));return{yearValue:g,monthValue:b,dayValue:M,dateString:N,changeCount:s.changeCount+1}})},[]),S=l.exports.useCallback(e=>{const{year:r,month:o,day:s}=v(e);c(g=>({yearValue:r,monthValue:o,dayValue:s,dateString:e,changeCount:g.changeCount}))},[]),Y=l.exports.useRef(!1);l.exports.useEffect(()=>{!Y.current||u(a.dateString||"")},[a.changeCount]),l.exports.useEffect(()=>(Y.current=!0,()=>{Y.current=!1}),[]),l.exports.useEffect(()=>{if(typeof t!="string")return;(a.dateString||"")!==t&&S(t)},[S,t]);const i=n.locale,d=n.yearFormat,m=l.exports.useMemo(()=>{const e=n.firstYear!=null?n.firstYear:O,r=n.lastYear!=null?n.lastYear:new Date().getFullYear();return D(e,r).map(o=>{const s=d?h(new Date(o,0,1),d,{locale:i}):o.toString();return{value:y(o),label:s}})},[n.firstYear,n.lastYear,i,d]),p=n.monthFormat,F=l.exports.useMemo(()=>D(1,12).map(e=>({label:p?h(new Date(1960,e-1),p,{locale:i}):e.toString(),value:y(e)})),[i,p]),x=n.dayFormat,k=l.exports.useMemo(()=>D(1,31).map(e=>({label:x?h(new Date(1960,0,e),x,{locale:i}):e.toString(),value:y(e)})),[i,x]),E=l.exports.useMemo(()=>{if(a.yearValue!==""&&!m.some(e=>e.value===a.yearValue)){let e;try{e=d?h(new Date(V(a.yearValue),0,1),d,{locale:i}):a.yearValue}catch{e=a.yearValue}return m.concat({label:e,value:a.yearValue})}return m},[a.yearValue,m]);return{yearValue:a.yearValue,monthValue:a.monthValue,dayValue:a.dayValue,yearOptions:E,monthOptions:F,dayOptions:k,onYearChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value;f({year:r})},[f]),onMonthChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value;f({month:r})},[f]),onDayChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value;f({day:r})},[f]),dateValue:a.dateString,onDateChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value,{year:o,month:s,day:g}=v(r);f({year:o,month:s,day:g})},[f]),setDate:S}};export{I as g,_ as u};
