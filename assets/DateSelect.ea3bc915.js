var b=Object.defineProperty,E=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var S=(e,t,a)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))N.call(t,a)&&S(e,a,t[a]);if(Y)for(var a of Y(t))w.call(t,a)&&S(e,a,t[a]);return e},p=(e,t)=>E(e,M(t));import{r as i,b as x}from"./vendor.8c422dd9.js";function m(e,t){if(e>t)return m(t,e).reverse();const a=[];for(let r=e;r<=t;r++)a.push(r);return a}function h(e,t){return("0".repeat(t-1)+e.toString()).slice(-t)}function A(e,t,a){if(t<1||12<t||a<1||31<a)return null;const r=h(e,4)+"-"+h(t,2)+"-"+h(a,2),s=new Date(r);return s.getFullYear()!==e||s.getMonth()!==t-1||s.getDate()!==a?null:r}function v(e){const t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return isNaN(a)||isNaN(r)||isNaN(s)?{year:"",month:"",day:""}:{year:a.toString(),month:r.toString(),day:s.toString()}}const k=1960,F=new Date().getFullYear();function V(e){return parseInt(e)}function g(e){return e.toString()}function D(e){return{value:e,label:e}}const O=m(1,12).map(e=>D(g(e))),R=m(1,31).map(e=>D(g(e))),_=e=>{const[t,a]=i.exports.useState({yearValue:e.defaultYear?g(e.defaultYear):"",monthValue:e.defaultMonth?g(e.defaultMonth):"",dayValue:e.defaultDay?g(e.defaultDay):"",dateString:null,changeCount:0}),r=i.exports.useCallback(({year:n,month:o,day:c})=>{a(u=>{const l=n||u.yearValue,d=o||u.monthValue,f=c||u.dayValue,C=A(V(l),V(d),V(f));return{yearValue:l,monthValue:d,dayValue:f,dateString:C,changeCount:u.changeCount+1}})},[e.onChange]);i.exports.useEffect(()=>{e.onChange(t.dateString||"")},[t.changeCount,e.onChange]);const s=i.exports.useMemo(()=>{const n=e.minYear!=null?e.minYear:k,o=e.maxYear!=null?e.maxYear:F,c=m(n,o).map(u=>{const l=g(u);return{value:l,label:l}});return c.some(u=>u.value===t.yearValue)?c:c.concat(D(t.yearValue))},[e.minYear,e.maxYear,t.yearValue]);return{yearValue:t.yearValue,monthValue:t.monthValue,dayValue:t.dayValue,yearOptions:s,monthOptions:O,dayOptions:R,onYearChange:i.exports.useCallback(n=>{const o=typeof n=="string"?n:n.target.value;r({year:o})},[r]),onMonthChange:i.exports.useCallback(n=>{const o=typeof n=="string"?n:n.target.value;r({month:o})},[r]),onDayChange:i.exports.useCallback(n=>{const o=typeof n=="string"?n:n.target.value;r({day:o})},[r]),dateValue:t.dateString,onDateChange:i.exports.useCallback(n=>{const o=typeof n=="string"?n:n.target.value,{year:c,month:u,day:l}=v(o);r({year:c,month:u,day:l})},[r]),setDate:i.exports.useCallback(n=>{const{year:o,month:c,day:u}=v(n);a(l=>({yearValue:o,monthValue:c,dayValue:u,dateString:n,changeCount:l.changeCount}))},[])}},T=x.forwardRef((e,t)=>{const{onChange:a,value:r,maxYear:s,minYear:n,defaultYear:o,defaultMonth:c,defaultDay:u}=e,l=_({minYear:n,maxYear:s,onChange:a,defaultYear:o,defaultMonth:c,defaultDay:u}),{setDate:d,dateValue:f}=l;if(i.exports.useEffect(()=>{if(typeof r!="string")return;(f||"")!==r&&d(r)},[d,f,r]),e.component)return x.createElement(e.component,y({ref:t},l));if(e.render)return e.render(p(y({},l),{ref:t}));throw new Error("Either render or component must be provided.")});T.displayName="DateSelect";export{T as D};
