import{r as s}from"./vendor.9c094540.js";function d(e,r){if(e>r)return d(r,e).reverse();const n=[];for(let a=e;a<=r;a++)n.push(a);return n}function h(e,r){return("0".repeat(r-1)+e.toString()).slice(-r)}function M(e,r,n){if(r<1||12<r||n<1||31<n)return null;const a=h(e,4)+"-"+h(r,2)+"-"+h(n,2),o=new Date(a);return o.getFullYear()!==e||o.getMonth()!==r-1||o.getDate()!==n?null:a}function x(e){const r=new Date(e),n=r.getFullYear(),a=r.getMonth()+1,o=r.getDate();return isNaN(n)||isNaN(a)||isNaN(o)?{year:"",month:"",day:""}:{year:n.toString(),month:a.toString(),day:o.toString()}}const b=1960,w=new Date().getFullYear();function V(e){return parseInt(e)}function g(e){return e.toString()}function D(e){return{value:e,label:e}}const v=d(1,12).map(e=>D(g(e))),A=d(1,31).map(e=>D(g(e)));function E(e){const r=new Date;let n=null;e.defaultYear!=null&&(e.defaultYear==="now"?n=r.getFullYear():typeof e.defaultYear=="number"&&(n=e.defaultYear));let a=null;e.defaultMonth!=null&&(e.defaultMonth==="now"?a=r.getMonth()+1:typeof e.defaultMonth=="number"&&(a=e.defaultMonth));let o=null;return e.defaultDay!=null&&(e.defaultDay==="now"?o=r.getDate():typeof e.defaultDay=="number"&&(o=e.defaultDay)),{defaultYear:n,defaultMonth:a,defaultDay:o}}const k=(e,r,n={})=>{const[a,o]=s.exports.useState(()=>{const{defaultYear:t,defaultMonth:u,defaultDay:l}=E(n);return{yearValue:t?g(t):"",monthValue:u?g(u):"",dayValue:l?g(l):"",dateString:null,changeCount:0}}),i=s.exports.useCallback(({year:t,month:u,day:l})=>{o(c=>{const f=t!=null?t:c.yearValue,p=u!=null?u:c.monthValue,Y=l!=null?l:c.dayValue,S=M(V(f),V(p),V(Y));return{yearValue:f,monthValue:p,dayValue:Y,dateString:S,changeCount:c.changeCount+1}})},[]),y=s.exports.useCallback(t=>{const{year:u,month:l,day:c}=x(t);o(f=>({yearValue:u,monthValue:l,dayValue:c,dateString:t,changeCount:f.changeCount}))},[]),m=s.exports.useRef(!1);s.exports.useEffect(()=>{!m.current||r(a.dateString||"")},[a.changeCount]),s.exports.useEffect(()=>(m.current=!0,()=>{m.current=!1}),[]),s.exports.useEffect(()=>{if(typeof e!="string")return;(a.dateString||"")!==e&&y(e)},[y,e]);const C=s.exports.useMemo(()=>{const t=n.minYear!=null?n.minYear:b,u=n.maxYear!=null?n.maxYear:w,l=d(t,u).map(c=>{const f=g(c);return{value:f,label:f}});return l.some(c=>c.value===a.yearValue)?l:l.concat(D(a.yearValue))},[n.minYear,n.maxYear,a.yearValue]);return{yearValue:a.yearValue,monthValue:a.monthValue,dayValue:a.dayValue,yearOptions:C,monthOptions:v,dayOptions:A,onYearChange:s.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value;i({year:u})},[i]),onMonthChange:s.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value;i({month:u})},[i]),onDayChange:s.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value;i({day:u})},[i]),dateValue:a.dateString,onDateChange:s.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value,{year:l,month:c,day:f}=x(u);i({year:l,month:c,day:f})},[i]),setDate:y}};export{k as u};
