import{r as l,v as h}from"./vendor.dc3ff489.js";function V(t,r){if(t>r)return V(r,t).reverse();const n=[];for(let a=t;a<=r;a++)n.push(a);return n}function M(t,r){return("0".repeat(r-1)+t.toString()).slice(-r)}function w(t,r,n){if(r<1||12<r||n<1||31<n)return null;const a=M(t,4)+"-"+M(r,2)+"-"+M(n,2),s=new Date(a);return s.getFullYear()!==t||s.getMonth()!==r-1||s.getDate()!==n?null:a}function v(t){const r=new Date(t),n=r.getFullYear(),a=r.getMonth()+1,s=r.getDate();return isNaN(n)||isNaN(a)||isNaN(s)?{year:"",month:"",day:""}:{year:n.toString(),month:a.toString(),day:s.toString()}}function T(t){return w(t.getFullYear(),t.getMonth()+1,t.getDate())}const k=1960,O=new Date().getFullYear();function D(t){return parseInt(t)}function y(t){return t.toString()}function R(t){const r=new Date;let n=null;t.defaultYear!=null&&(t.defaultYear==="now"?n=r.getFullYear():typeof t.defaultYear=="number"&&(n=t.defaultYear));let a=null;t.defaultMonth!=null&&(t.defaultMonth==="now"?a=r.getMonth()+1:typeof t.defaultMonth=="number"&&(a=t.defaultMonth));let s=null;return t.defaultDay!=null&&(t.defaultDay==="now"?s=r.getDate():typeof t.defaultDay=="number"&&(s=t.defaultDay)),{defaultYear:n,defaultMonth:a,defaultDay:s}}const I=(t,r,n={})=>{const[a,s]=l.exports.useState(()=>{const{defaultYear:e,defaultMonth:u,defaultDay:o}=R(n);return{yearValue:e?y(e):"",monthValue:u?y(u):"",dayValue:o?y(o):"",dateString:null,changeCount:0}}),f=l.exports.useCallback(({year:e,month:u,day:o})=>{s(c=>{const g=e!=null?e:c.yearValue,b=u!=null?u:c.monthValue,C=o!=null?o:c.dayValue,N=w(D(g),D(b),D(C));return{yearValue:g,monthValue:b,dayValue:C,dateString:N,changeCount:c.changeCount+1}})},[]),Y=l.exports.useCallback(e=>{const{year:u,month:o,day:c}=v(e);s(g=>({yearValue:u,monthValue:o,dayValue:c,dateString:e,changeCount:g.changeCount}))},[]),p=l.exports.useRef(!1);l.exports.useEffect(()=>{!p.current||r(a.dateString||"")},[a.changeCount]),l.exports.useEffect(()=>(p.current=!0,()=>{p.current=!1}),[]),l.exports.useEffect(()=>{if(typeof t!="string")return;(a.dateString||"")!==t&&Y(t)},[Y,t]);const i=n.locale,m=n.yearFormat,d=l.exports.useMemo(()=>{const e=n.minYear!=null?n.minYear:k,u=n.maxYear!=null?n.maxYear:O;return V(e,u).map(o=>{const c=m?h(new Date(o,0,1),m,{locale:i}):o.toString();return{value:y(o),label:c}})},[n.minYear,n.maxYear,i,m]),x=n.monthFormat,F=l.exports.useMemo(()=>V(1,12).map(e=>({label:x?h(new Date(1960,e-1),x,{locale:i}):e.toString(),value:y(e)})),[i,x]),S=n.dayFormat,A=l.exports.useMemo(()=>V(1,31).map(e=>({label:S?h(new Date(1960,0,e),S,{locale:i}):e.toString(),value:y(e)})),[i,S]),E=l.exports.useMemo(()=>{if(a.yearValue!==""&&!d.some(e=>e.value===a.yearValue)){let e;try{e=m?h(new Date(D(a.yearValue),0,1),m,{locale:i}):a.yearValue}catch{e=a.yearValue}return d.concat({label:e,value:a.yearValue})}return d},[a.yearValue,d]);return{yearValue:a.yearValue,monthValue:a.monthValue,dayValue:a.dayValue,yearOptions:E,monthOptions:F,dayOptions:A,onYearChange:l.exports.useCallback(e=>{const u=typeof e=="string"?e:e.target.value;f({year:u})},[f]),onMonthChange:l.exports.useCallback(e=>{const u=typeof e=="string"?e:e.target.value;f({month:u})},[f]),onDayChange:l.exports.useCallback(e=>{const u=typeof e=="string"?e:e.target.value;f({day:u})},[f]),dateValue:a.dateString,onDateChange:l.exports.useCallback(e=>{const u=typeof e=="string"?e:e.target.value,{year:o,month:c,day:g}=v(u);f({year:o,month:c,day:g})},[f]),setDate:Y}};export{T as g,I as u};
