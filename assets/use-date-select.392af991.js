import{v as k,r as l,w as h}from"./vendor.bb11239e.js";function D(t,u){if(t>u)return D(u,t).reverse();const n=[];for(let a=t;a<=u;a++)n.push(a);return n}function C(t,u){return("0".repeat(u-1)+t.toString()).slice(-u)}function w(t,u,n){return k(t,u-1,n)?C(t,4)+"-"+C(u,2)+"-"+C(n,2):null}function v(t){const u=new Date(t),n=u.getFullYear(),a=u.getMonth()+1,c=u.getDate();return isNaN(n)||isNaN(a)||isNaN(c)?{year:"",month:"",day:""}:{year:n.toString(),month:a.toString(),day:c.toString()}}function I(t){return w(t.getFullYear(),t.getMonth()+1,t.getDate())}const O=1960,R=new Date().getFullYear();function V(t){return parseInt(t)}function y(t){return t.toString()}function _(t){const u=new Date;let n=null;t.defaultYear!=null&&(t.defaultYear==="now"?n=u.getFullYear():typeof t.defaultYear=="number"&&(n=t.defaultYear));let a=null;t.defaultMonth!=null&&(t.defaultMonth==="now"?a=u.getMonth()+1:typeof t.defaultMonth=="number"&&(a=t.defaultMonth));let c=null;return t.defaultDay!=null&&(t.defaultDay==="now"?c=u.getDate():typeof t.defaultDay=="number"&&(c=t.defaultDay)),{defaultYear:n,defaultMonth:a,defaultDay:c}}const L=(t,u,n={})=>{const[a,c]=l.exports.useState(()=>{const{defaultYear:e,defaultMonth:r,defaultDay:o}=_(n);return{yearValue:e?y(e):"",monthValue:r?y(r):"",dayValue:o?y(o):"",dateString:null,changeCount:0}}),f=l.exports.useCallback(({year:e,month:r,day:o})=>{c(s=>{const g=e!=null?e:s.yearValue,M=r!=null?r:s.monthValue,b=o!=null?o:s.dayValue,N=w(V(g),V(M),V(b));return{yearValue:g,monthValue:M,dayValue:b,dateString:N,changeCount:s.changeCount+1}})},[]),Y=l.exports.useCallback(e=>{const{year:r,month:o,day:s}=v(e);c(g=>({yearValue:r,monthValue:o,dayValue:s,dateString:e,changeCount:g.changeCount}))},[]),x=l.exports.useRef(!1);l.exports.useEffect(()=>{!x.current||u(a.dateString||"")},[a.changeCount]),l.exports.useEffect(()=>(x.current=!0,()=>{x.current=!1}),[]),l.exports.useEffect(()=>{if(typeof t!="string")return;(a.dateString||"")!==t&&Y(t)},[Y,t]);const i=n.locale,m=n.yearFormat,d=l.exports.useMemo(()=>{const e=n.minYear!=null?n.minYear:O,r=n.maxYear!=null?n.maxYear:R;return D(e,r).map(o=>{const s=m?h(new Date(o,0,1),m,{locale:i}):o.toString();return{value:y(o),label:s}})},[n.minYear,n.maxYear,i,m]),S=n.monthFormat,F=l.exports.useMemo(()=>D(1,12).map(e=>({label:S?h(new Date(1960,e-1),S,{locale:i}):e.toString(),value:y(e)})),[i,S]),p=n.dayFormat,E=l.exports.useMemo(()=>D(1,31).map(e=>({label:p?h(new Date(1960,0,e),p,{locale:i}):e.toString(),value:y(e)})),[i,p]),A=l.exports.useMemo(()=>{if(a.yearValue!==""&&!d.some(e=>e.value===a.yearValue)){let e;try{e=m?h(new Date(V(a.yearValue),0,1),m,{locale:i}):a.yearValue}catch{e=a.yearValue}return d.concat({label:e,value:a.yearValue})}return d},[a.yearValue,d]);return{yearValue:a.yearValue,monthValue:a.monthValue,dayValue:a.dayValue,yearOptions:A,monthOptions:F,dayOptions:E,onYearChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value;f({year:r})},[f]),onMonthChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value;f({month:r})},[f]),onDayChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value;f({day:r})},[f]),dateValue:a.dateString,onDateChange:l.exports.useCallback(e=>{const r=typeof e=="string"?e:e.target.value,{year:o,month:s,day:g}=v(r);f({year:o,month:s,day:g})},[f]),setDate:Y}};export{I as g,L as u};
