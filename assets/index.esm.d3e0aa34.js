import{R as F}from"./jsx-runtime.2f4bb9f3.js";var le=e=>e.type==="checkbox",te=e=>e instanceof Date,T=e=>e==null;const rr=e=>typeof e=="object";var L=e=>!T(e)&&!Array.isArray(e)&&rr(e)&&!te(e),tr=e=>L(e)&&e.target?le(e.target)?e.target.checked:e.target.value:e,wr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,sr=(e,t)=>e.has(wr(t)),ie=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,c=(e,t,r)=>{if(!t||!L(e))return r;const s=ie(t.split(/[,[\].]+?/)).reduce((n,o)=>T(n)?n:n[o],e);return C(s)||s===e?C(e[t])?r:e[t]:s};const fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ir=F.createContext(null),ue=()=>F.useContext(ir),kr=e=>{const{children:t,...r}=e;return F.createElement(ir.Provider,{value:r},t)};var nr=(e,t,r,s=!0)=>{const n={};for(const o in e)Object.defineProperty(n,o,{get:()=>{const y=o;return t[y]!==W.all&&(t[y]=!s||W.all),r&&(r[y]=!0),e[y]}});return n},I=e=>L(e)&&!Object.keys(e).length,ar=(e,t,r)=>{const{name:s,...n}=e;return I(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(o=>t[o]===(!r||W.all))},j=e=>Array.isArray(e)?e:[e],lr=(e,t,r)=>r&&t?e===t:!e||!t||e===t||j(e).some(s=>s&&(s.startsWith(t)||t.startsWith(s)));function me(e){const t=F.useRef(e);t.current=e,F.useEffect(()=>{const r=n=>{n&&n.unsubscribe()},s=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(s)},[e.disabled])}function ur(e){const t=ue(),{control:r=t.control,disabled:s,name:n,exact:o}=e||{},[y,d]=F.useState(r._formState),A=F.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=F.useRef(n),k=F.useRef(!0);p.current=n;const V=F.useCallback(_=>k.current&&lr(p.current,_.name,o)&&ar(_,A.current)&&d({...r._formState,..._}),[r,o]);return me({disabled:s,callback:V,subject:r._subjects.state}),F.useEffect(()=>(k.current=!0,()=>{k.current=!1}),[]),nr(y,r._proxyFormState,A.current,!1)}var J=e=>typeof e=="string",or=(e,t,r,s)=>{const n=Array.isArray(e);return J(e)?(s&&t.watch.add(e),c(r,e)):n?e.map(o=>(s&&t.watch.add(o),c(r,o))):(s&&(t.watchAll=!0),r)},be=e=>typeof e=="function",Ie=e=>{for(const t in e)if(be(e[t]))return!0;return!1};function cr(e){const t=ue(),{control:r=t.control,name:s,defaultValue:n,disabled:o,exact:y}=e||{},d=F.useRef(s);d.current=s;const A=F.useCallback(V=>{if(lr(d.current,V.name,y)){const _=or(d.current,r._names,V.values||r._formValues);k(C(d.current)||L(_)&&!Ie(_)?{..._}:Array.isArray(_)?[..._]:C(_)?n:_)}},[r,y,n]);me({disabled:o,subject:r._subjects.watch,callback:A});const[p,k]=F.useState(C(n)?r._getWatch(s):n);return F.useEffect(()=>{r._removeUnmounted()}),p}function fr(e){const t=ue(),{name:r,control:s=t.control,shouldUnregister:n}=e,o=sr(s._names.array,r),y=cr({control:s,name:r,defaultValue:c(s._formValues,r,c(s._defaultValues,r,e.defaultValue)),exact:!0}),d=ur({control:s,name:r}),A=F.useRef(s.register(r,{...e.rules,value:y}));return F.useEffect(()=>{const p=(k,V)=>{const _=c(s._fields,k);_&&(_._f.mount=V)};return p(r,!0),()=>{const k=s._options.shouldUnregister||n;(o?k&&!s._stateFlags.action:k)?s.unregister(r):p(r,!1)}},[r,s,o,n]),{field:{name:r,value:y,onChange:F.useCallback(p=>{A.current.onChange({target:{value:tr(p),name:r},type:fe.CHANGE})},[r]),onBlur:F.useCallback(()=>{A.current.onBlur({target:{value:c(s._formValues,r),name:r},type:fe.BLUR})},[r,s]),ref:F.useCallback(p=>{const k=c(s._fields,r);p&&k&&p.focus&&(k._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:V=>p.setCustomValidity(V),reportValidity:()=>p.reportValidity()})},[r,s._fields])},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(d.touchedFields,r)},error:{enumerable:!0,get:()=>c(d.errors,r)}})}}const Sr=e=>e.render(fr(e));var dr=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},je=e=>/^\w*$/.test(e),yr=e=>ie(e.replace(/["|']|\]/g,"").split(/\.|\[/));function D(e,t,r){let s=-1;const n=je(t)?[t]:yr(t),o=n.length,y=o-1;for(;++s<o;){const d=n[s];let A=r;if(s!==y){const p=e[d];A=L(p)||Array.isArray(p)?p:isNaN(+n[s+1])?{}:[]}e[d]=A,e=e[d]}return e}const de=(e,t,r)=>{for(const s of r||Object.keys(e)){const n=c(e,s);if(n){const{_f:o,...y}=n;if(o&&t(o.name)){if(o.ref.focus&&C(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else L(y)&&de(y,t)}}};var X=()=>{const e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},Ve=(e,t,r={})=>r.shouldFocus||C(r.shouldFocus)?r.focusName||`${e}.${C(r.focusIndex)?t:r.focusIndex}.`:"",Me=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),gr=(e,t,r)=>{const s=ie(c(e,r));return D(s,"root",t[r]),D(e,r,s),e},ye=e=>typeof e=="boolean",qe=e=>e.type==="file",ce=e=>J(e)||F.isValidElement(e),We=e=>e.type==="radio",ge=e=>e instanceof RegExp;const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var hr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je};const Xe={isValid:!1,value:null};var _r=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Xe):Xe;function Ye(e,t,r="validate"){if(ce(e)||Array.isArray(e)&&e.every(ce)||ye(e)&&!e)return{type:r,message:ce(e)?e:"",ref:t}}var re=e=>L(e)&&!ge(e)?e:{value:e,message:""},Te=async(e,t,r,s,n)=>{const{ref:o,refs:y,required:d,maxLength:A,minLength:p,min:k,max:V,pattern:_,validate:E,name:P,valueAsNumber:ee,mount:ne,disabled:z}=e._f;if(!ne||z)return{};const H=y?y[0]:o,$=v=>{s&&H.reportValidity&&(H.setCustomValidity(ye(v)?"":v||" "),H.reportValidity())},R={},Y=We(o),m=le(o),b=Y||m,x=(ee||qe(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,S=dr.bind(null,P,r,R),G=(v,w,U,B=Q.maxLength,K=Q.minLength)=>{const Z=v?w:U;R[P]={type:v?B:K,message:Z,ref:o,...S(v?B:K,Z)}};if(n?!Array.isArray(t)||!t.length:d&&(!b&&(x||T(t))||ye(t)&&!t||m&&!hr(y).isValid||Y&&!_r(y).isValid)){const{value:v,message:w}=ce(d)?{value:!!d,message:d}:re(d);if(v&&(R[P]={type:Q.required,message:w,ref:H,...S(Q.required,w)},!r))return $(w),R}if(!x&&(!T(k)||!T(V))){let v,w;const U=re(V),B=re(k);if(!T(t)&&!isNaN(t)){const K=o.valueAsNumber||t&&+t;T(U.value)||(v=K>U.value),T(B.value)||(w=K<B.value)}else{const K=o.valueAsDate||new Date(t);J(U.value)&&(v=K>new Date(U.value)),J(B.value)&&(w=K<new Date(B.value))}if((v||w)&&(G(!!v,U.message,B.message,Q.max,Q.min),!r))return $(R[P].message),R}if((A||p)&&!x&&(J(t)||n&&Array.isArray(t))){const v=re(A),w=re(p),U=!T(v.value)&&t.length>v.value,B=!T(w.value)&&t.length<w.value;if((U||B)&&(G(U,v.message,w.message),!r))return $(R[P].message),R}if(_&&!x&&J(t)){const{value:v,message:w}=re(_);if(ge(v)&&!t.match(v)&&(R[P]={type:Q.pattern,message:w,ref:o,...S(Q.pattern,w)},!r))return $(w),R}if(E){if(be(E)){const v=await E(t),w=Ye(v,H);if(w&&(R[P]={...w,...S(Q.validate,w.message)},!r))return $(w.message),R}else if(L(E)){let v={};for(const w in E){if(!I(v)&&!r)break;const U=Ye(await E[w](t),H,w);U&&(v={...U,...S(w,U.message)},$(U.message),r&&(R[P]=v))}if(!I(v)&&(R[P]={ref:H,...v},!r))return R}}return $(!0),R};function pe(e,t){return[...e,...j(t)]}var Be=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function q(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Be&&(e instanceof Blob||e instanceof FileList))&&(r||L(e))){t=r?[]:{};for(const s in e){if(be(e[s])){t=e;break}t[s]=q(e[s])}}else return e;return t}var we=e=>Array.isArray(e)?e.map(()=>{}):void 0,Pe=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched});function ke(e,t,r){return[...e.slice(0,t),...j(r),...e.slice(t)]}var Se=(e,t,r)=>Array.isArray(e)?(C(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[];function De(e,t){return[...j(t),...j(e)]}function Dr(e,t){let r=0;const s=[...e];for(const n of t)s.splice(n-r,1),r++;return ie(s).length?s:[]}var Ce=(e,t)=>C(t)?[]:Dr(e,j(t).sort((r,s)=>r-s)),Ee=(e,t,r)=>{e[t]=[e[r],e[r]=e[t]][0]};function Cr(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=C(e)?s++:e[t[s++]];return e}function Er(e){for(const t in e)if(!C(e[t]))return!1;return!0}function M(e,t){const r=je(t)?[t]:yr(t),s=r.length==1?e:Cr(e,r),n=r[r.length-1];let o;s&&delete s[n];for(let y=0;y<r.slice(0,-1).length;y++){let d=-1,A;const p=r.slice(0,-(y+1)),k=p.length-1;for(y>0&&(o=e);++d<p.length;){const V=p[d];A=A?A[V]:e[V],k===d&&(L(A)&&I(A)||Array.isArray(A)&&Er(A))&&(o?delete o[V]:delete e[V]),o=A}}return e}var Ze=(e,t,r)=>(e[t]=r,e);function Rr(e){const t=ue(),{control:r=t.control,name:s,keyName:n="id",shouldUnregister:o}=e,[y,d]=F.useState(r._getFieldArray(s)),A=F.useRef(r._getFieldArray(s).map(X)),p=F.useRef(y),k=F.useRef(s),V=F.useRef(!1);k.current=s,p.current=y,r._names.array.add(s),e.rules&&r.register(s,e.rules);const _=F.useCallback(({values:m,name:b})=>{if(b===k.current||!b){const x=c(m,k.current,[]);d(x),A.current=x.map(X)}},[]);me({callback:_,subject:r._subjects.array});const E=F.useCallback(m=>{V.current=!0,r._updateFieldArray(s,m)},[r,s]),P=(m,b)=>{const x=j(q(m)),S=pe(r._getFieldArray(s),x);r._names.focus=Ve(s,S.length-1,b),A.current=pe(A.current,x.map(X)),E(S),d(S),r._updateFieldArray(s,S,pe,{argA:we(m)})},ee=(m,b)=>{const x=j(q(m)),S=De(r._getFieldArray(s),x);r._names.focus=Ve(s,0,b),A.current=De(A.current,x.map(X)),E(S),d(S),r._updateFieldArray(s,S,De,{argA:we(m)})},ne=m=>{const b=Ce(r._getFieldArray(s),m);A.current=Ce(A.current,m),E(b),d(b),r._updateFieldArray(s,b,Ce,{argA:m})},z=(m,b,x)=>{const S=j(q(b)),G=ke(r._getFieldArray(s),m,S);r._names.focus=Ve(s,m,x),A.current=ke(A.current,m,S.map(X)),E(G),d(G),r._updateFieldArray(s,G,ke,{argA:m,argB:we(b)})},H=(m,b)=>{const x=r._getFieldArray(s);Ee(x,m,b),Ee(A.current,m,b),E(x),d(x),r._updateFieldArray(s,x,Ee,{argA:m,argB:b},!1)},$=(m,b)=>{const x=r._getFieldArray(s);Se(x,m,b),Se(A.current,m,b),E(x),d(x),r._updateFieldArray(s,x,Se,{argA:m,argB:b},!1)},R=(m,b)=>{const x=q(b),S=Ze(r._getFieldArray(s),m,x);A.current=[...S].map((G,v)=>!G||v===m?X():A.current[v]),E(S),d([...S]),r._updateFieldArray(s,S,Ze,{argA:m,argB:x},!0,!1)},Y=m=>{const b=j(q(m));A.current=b.map(X),E([...b]),d([...b]),r._updateFieldArray(s,[...b],x=>x,{},!0,!1)};return F.useEffect(()=>{if(r._stateFlags.action=!1,Me(s,r._names)&&r._subjects.state.next({}),V.current)if(r._options.resolver)r._executeSchema([s]).then(m=>{const b=c(m.errors,s),x=c(r._formState.errors,s);(x?!b&&x.type:b&&b.type)&&(b?D(r._formState.errors,s,b):M(r._formState.errors,s),r._subjects.state.next({errors:r._formState.errors}))});else{const m=c(r._fields,s);(!Pe(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&m&&m._f&&Te(m,c(r._formValues,s),r._options.criteriaMode===W.all,r._options.shouldUseNativeValidation,!0).then(x=>!I(x)&&r._subjects.state.next({errors:gr(r._formState.errors,x,s)}))}r._subjects.watch.next({name:s,values:r._formValues}),r._names.focus&&de(r._fields,m=>m.startsWith(r._names.focus)),r._names.focus="",r._proxyFormState.isValid&&r._updateValid()},[y,s,r]),F.useEffect(()=>(!c(r._formValues,s)&&r._updateFieldArray(s),()=>{(r._options.shouldUnregister||o)&&r.unregister(s)}),[s,r,n,o]),{swap:F.useCallback(H,[E,s,r]),move:F.useCallback($,[E,s,r]),prepend:F.useCallback(ee,[E,s,r]),append:F.useCallback(P,[E,s,r]),remove:F.useCallback(ne,[E,s,r]),insert:F.useCallback(z,[E,s,r]),update:F.useCallback(R,[E,s,r]),replace:F.useCallback(Y,[E,s,r]),fields:F.useMemo(()=>y.map((m,b)=>({...m,[n]:A.current[b]||X()})),[y,n])}}function Re(){let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}}var he=e=>T(e)||!rr(e);function se(e,t){if(he(e)||he(t))return e===t;if(te(e)&&te(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const n of r){const o=e[n];if(!s.includes(n))return!1;if(n!=="ref"){const y=t[n];if(te(o)&&te(y)||L(o)&&L(y)||Array.isArray(o)&&Array.isArray(y)?!se(o,y):o!==y)return!1}}return!0}var Ne=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},mr=e=>e.type==="select-multiple",Or=e=>We(e)||le(e),Oe=e=>Ne(e)&&e.isConnected;function _e(e,t={}){const r=Array.isArray(e);if(L(e)||r)for(const s in e)Array.isArray(e[s])||L(e[s])&&!Ie(e[s])?(t[s]=Array.isArray(e[s])?[]:{},_e(e[s],t[s])):T(e[s])||(t[s]=!0);return t}function br(e,t,r){const s=Array.isArray(e);if(L(e)||s)for(const n in e)Array.isArray(e[n])||L(e[n])&&!Ie(e[n])?C(t)||he(r[n])?r[n]=Array.isArray(e[n])?_e(e[n],[]):{..._e(e[n])}:br(e[n],T(t)?{}:t[n],r[n]):r[n]=!se(e[n],t[n]);return r}var Ue=(e,t)=>br(e,t,_e(t)),Ar=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>C(e)?e:t?e===""?NaN:e&&+e:r&&J(e)?new Date(e):s?s(e):e;function Le(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return qe(t)?t.files:We(t)?_r(e.refs).value:mr(t)?[...t.selectedOptions].map(({value:r})=>r):le(t)?hr(e.refs).value:Ar(C(t.value)?e.ref.value:t.value,e)}var Ur=(e,t,r,s)=>{const n={};for(const o of e){const y=c(t,o);y&&D(n,o,y._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},ae=e=>C(e)?void 0:ge(e)?e.source:L(e)?ge(e.value)?e.value.source:e.value:e,Lr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function er(e,t,r){const s=c(e,r);if(s||je(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const o=n.join("."),y=c(t,o),d=c(e,o);if(y&&!Array.isArray(y)&&r!==o)return{name:r};if(d&&d.type)return{name:o,error:d};n.pop()}return{name:r}}var Mr=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,Tr=(e,t)=>!ie(c(e,t)).length&&M(e,t);const Br={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function Pr(e={}){let t={...Br,...e},r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},s={},n=q(t.defaultValues)||{},o=t.shouldUnregister?{}:q(n),y={action:!1,mount:!1,watch:!1},d={mount:new Set,unMount:new Set,array:new Set,watch:new Set},A,p=0,k={};const V={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={watch:Re(),array:Re(),state:Re()},E=Pe(t.mode),P=Pe(t.reValidateMode),ee=t.criteriaMode===W.all,ne=i=>a=>{clearTimeout(p),p=window.setTimeout(i,a)},z=async i=>{let a=!1;return V.isValid&&(a=t.resolver?I((await b()).errors):await S(s,!0),!i&&a!==r.isValid&&(r.isValid=a,_.state.next({isValid:a}))),a},H=(i,a=[],l,f,g=!0,u=!0)=>{if(f&&l){if(y.action=!0,u&&Array.isArray(c(s,i))){const h=l(c(s,i),f.argA,f.argB);g&&D(s,i,h)}if(V.errors&&u&&Array.isArray(c(r.errors,i))){const h=l(c(r.errors,i),f.argA,f.argB);g&&D(r.errors,i,h),Tr(r.errors,i)}if(V.touchedFields&&u&&Array.isArray(c(r.touchedFields,i))){const h=l(c(r.touchedFields,i),f.argA,f.argB);g&&D(r.touchedFields,i,h)}V.dirtyFields&&(r.dirtyFields=Ue(n,o)),_.state.next({isDirty:v(i,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else D(o,i,a)},$=(i,a)=>{D(r.errors,i,a),_.state.next({errors:r.errors})},R=(i,a,l,f)=>{const g=c(s,i);if(g){const u=c(o,i,C(l)?c(n,i):l);C(u)||f&&f.defaultChecked||a?D(o,i,a?u:Le(g._f)):B(i,u),y.mount&&z()}},Y=(i,a,l,f,g)=>{let u=!1;const h={name:i},O=c(r.touchedFields,i);if(V.isDirty){const N=r.isDirty;r.isDirty=h.isDirty=v(),u=N!==h.isDirty}if(V.dirtyFields&&(!l||f)){const N=c(r.dirtyFields,i);se(c(n,i),a)?M(r.dirtyFields,i):D(r.dirtyFields,i,!0),h.dirtyFields=r.dirtyFields,u=u||N!==c(r.dirtyFields,i)}return l&&!O&&(D(r.touchedFields,i,l),h.touchedFields=r.touchedFields,u=u||V.touchedFields&&O!==l),u&&g&&_.state.next(h),u?h:{}},m=async(i,a,l,f)=>{const g=c(r.errors,i),u=V.isValid&&r.isValid!==a;if(e.delayError&&l?(A=ne(()=>$(i,l)),A(e.delayError)):(clearTimeout(p),A=null,l?D(r.errors,i,l):M(r.errors,i)),(l?!se(g,l):g)||!I(f)||u){const h={...f,...u?{isValid:a}:{},errors:r.errors,name:i};r={...r,...h},_.state.next(h)}k[i]--,V.isValidating&&!Object.values(k).some(h=>h)&&(_.state.next({isValidating:!1}),k={})},b=async i=>t.resolver?await t.resolver({...o},t.context,Ur(i||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation)):{},x=async i=>{const{errors:a}=await b();if(i)for(const l of i){const f=c(a,l);f?D(r.errors,l,f):M(r.errors,l)}else r.errors=a;return a},S=async(i,a,l={valid:!0})=>{for(const f in i){const g=i[f];if(g){const{_f:u,...h}=g;if(u){const O=d.array.has(u.name),N=await Te(g,c(o,u.name),ee,t.shouldUseNativeValidation,O);if(N[u.name]&&(l.valid=!1,a))break;!a&&(c(N,u.name)?O?gr(r.errors,N,u.name):D(r.errors,u.name,N[u.name]):M(r.errors,u.name))}h&&await S(h,a,l)}}return l.valid},G=()=>{for(const i of d.unMount){const a=c(s,i);a&&(a._f.refs?a._f.refs.every(l=>!Oe(l)):!Oe(a._f.ref))&&Fe(i)}d.unMount=new Set},v=(i,a)=>(i&&a&&D(o,i,a),!se($e(),n)),w=(i,a,l)=>{const f={...y.mount?o:C(a)?n:J(i)?{[i]:a}:a};return or(i,d,f,l)},U=i=>ie(c(y.mount?o:n,i,e.shouldUnregister?c(n,i,[]):[])),B=(i,a,l={})=>{const f=c(s,i);let g=a;if(f){const u=f._f;u&&(!u.disabled&&D(o,i,Ar(a,u)),g=Be&&Ne(u.ref)&&T(a)?"":a,mr(u.ref)?[...u.ref.options].forEach(h=>h.selected=g.includes(h.value)):u.refs?le(u.ref)?u.refs.length>1?u.refs.forEach(h=>!h.disabled&&(h.checked=Array.isArray(g)?!!g.find(O=>O===h.value):g===h.value)):u.refs[0]&&(u.refs[0].checked=!!g):u.refs.forEach(h=>h.checked=h.value===g):qe(u.ref)?u.ref.value="":(u.ref.value=g,u.ref.type||_.watch.next({name:i})))}(l.shouldDirty||l.shouldTouch)&&Y(i,g,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Ae(i)},K=(i,a,l)=>{for(const f in a){const g=a[f],u=`${i}.${f}`,h=c(s,u);(d.array.has(i)||!he(g)||h&&!h._f)&&!te(g)?K(u,g,l):B(u,g,l)}},Z=(i,a,l={})=>{const f=c(s,i),g=d.array.has(i),u=q(a);D(o,i,u),g?(_.array.next({name:i,values:o}),(V.isDirty||V.dirtyFields)&&l.shouldDirty&&(r.dirtyFields=Ue(n,o),_.state.next({name:i,dirtyFields:r.dirtyFields,isDirty:v(i,u)}))):f&&!f._f&&!T(u)?K(i,u,l):B(i,u,l),Me(i,d)&&_.state.next({}),_.watch.next({name:i})},He=async i=>{const a=i.target;let l=a.name;const f=c(s,l);if(f){let g,u;const h=a.type?Le(f._f):tr(i),O=i.type===fe.BLUR||i.type===fe.FOCUS_OUT,N=!Lr(f._f)&&!t.resolver&&!c(r.errors,l)&&!f._f.deps||Mr(O,c(r.touchedFields,l),r.isSubmitted,P,E),oe=Me(l,d,O);D(o,l,h),O?(f._f.onBlur&&f._f.onBlur(i),A&&A(0)):f._f.onChange&&f._f.onChange(i);const xe=Y(l,h,O,!1),Vr=!I(xe)||oe;if(!O&&_.watch.next({name:l,type:i.type}),N)return Vr&&_.state.next({name:l,...oe?{}:xe});if(!O&&oe&&_.state.next({}),k[l]=(k[l],1),_.state.next({isValidating:!0}),t.resolver){const{errors:ze}=await b([l]),pr=er(r.errors,s,l),Ge=er(ze,s,pr.name||l);g=Ge.error,l=Ge.name,u=I(ze)}else g=(await Te(f,c(o,l),ee,t.shouldUseNativeValidation))[l],u=await z(!0);f._f.deps&&Ae(f._f.deps),m(l,u,g,xe)}},Ae=async(i,a={})=>{let l,f;const g=j(i);if(_.state.next({isValidating:!0}),t.resolver){const u=await x(C(i)?i:g);l=I(u),f=i?!g.some(h=>c(u,h)):l}else i?(f=(await Promise.all(g.map(async u=>{const h=c(s,u);return await S(h&&h._f?{[u]:h}:h)}))).every(Boolean),!(!f&&!r.isValid)&&z()):f=l=await S(s);return _.state.next({...!J(i)||V.isValid&&l!==r.isValid?{}:{name:i},...t.resolver?{isValid:l}:{},errors:r.errors,isValidating:!1}),a.shouldFocus&&!f&&de(s,u=>c(r.errors,u),i?g:d.mount),f},$e=i=>{const a={...n,...y.mount?o:{}};return C(i)?a:J(i)?c(a,i):i.map(l=>c(a,l))},Ke=(i,a)=>({invalid:!!c((a||r).errors,i),isDirty:!!c((a||r).dirtyFields,i),isTouched:!!c((a||r).touchedFields,i),error:c((a||r).errors,i)}),Fr=i=>{i?j(i).forEach(a=>M(r.errors,a)):r.errors={},_.state.next({errors:r.errors})},vr=(i,a,l)=>{const f=(c(s,i,{_f:{}})._f||{}).ref;D(r.errors,i,{...a,ref:f}),_.state.next({name:i,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&f&&f.focus&&f.focus()},xr=(i,a)=>be(i)?_.watch.subscribe({next:l=>i(w(void 0,a),l)}):w(i,a,!0),Fe=(i,a={})=>{for(const l of i?j(i):d.mount)d.mount.delete(l),d.array.delete(l),c(s,l)&&(a.keepValue||(M(s,l),M(o,l)),!a.keepError&&M(r.errors,l),!a.keepDirty&&M(r.dirtyFields,l),!a.keepTouched&&M(r.touchedFields,l),!t.shouldUnregister&&!a.keepDefaultValue&&M(n,l));_.watch.next({}),_.state.next({...r,...a.keepDirty?{isDirty:v()}:{}}),!a.keepIsValid&&z()},ve=(i,a={})=>{let l=c(s,i);const f=ye(a.disabled);return D(s,i,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:i}},name:i,mount:!0,...a}}),d.mount.add(i),l?f&&D(o,i,a.disabled?void 0:c(o,i,Le(l._f))):R(i,!0,a.value),{...f?{disabled:a.disabled}:{},...t.shouldUseNativeValidation?{required:!!a.required,min:ae(a.min),max:ae(a.max),minLength:ae(a.minLength),maxLength:ae(a.maxLength),pattern:ae(a.pattern)}:{},name:i,onChange:He,onBlur:He,ref:g=>{if(g){ve(i,a),l=c(s,i);const u=C(g.value)&&g.querySelectorAll&&g.querySelectorAll("input,select,textarea")[0]||g,h=Or(u),O=l._f.refs||[];if(h?O.find(N=>N===u):u===l._f.ref)return;D(s,i,{_f:{...l._f,...h?{refs:[...O.filter(Oe),u,...Array.isArray(c(n,i))?[{}]:[]],ref:{type:u.type,name:i}}:{ref:u}}}),R(i,!1,void 0,u)}else l=c(s,i,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(sr(d.array,i)&&y.action)&&d.unMount.add(i)}}};return{control:{register:ve,unregister:Fe,getFieldState:Ke,_executeSchema:b,_getWatch:w,_getDirty:v,_updateValid:z,_removeUnmounted:G,_updateFieldArray:H,_getFieldArray:U,_subjects:_,_proxyFormState:V,get _fields(){return s},get _formValues(){return o},get _stateFlags(){return y},set _stateFlags(i){y=i},get _defaultValues(){return n},get _names(){return d},set _names(i){d=i},get _formState(){return r},set _formState(i){r=i},get _options(){return t},set _options(i){t={...t,...i}}},trigger:Ae,register:ve,handleSubmit:(i,a)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=!0,g=q(o);_.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:u,values:h}=await b();r.errors=u,g=h}else await S(s);I(r.errors)?(_.state.next({errors:{},isSubmitting:!0}),await i(g,l)):(a&&await a({...r.errors},l),t.shouldFocusError&&de(s,u=>c(r.errors,u),d.mount))}catch(u){throw f=!1,u}finally{r.isSubmitted=!0,_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(r.errors)&&f,submitCount:r.submitCount+1,errors:r.errors})}},watch:xr,setValue:Z,getValues:$e,reset:(i,a={})=>{const l=i||n,f=q(l),g=i&&!I(i)?f:n;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues)for(const u of d.mount)c(r.dirtyFields,u)?D(g,u,c(o,u)):Z(u,c(g,u));else{if(Be&&C(i))for(const u of d.mount){const h=c(s,u);if(h&&h._f){const O=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;try{if(Ne(O)){O.closest("form").reset();break}}catch{}}}s={}}o=e.shouldUnregister?a.keepDefaultValues?q(n):{}:f,_.array.next({values:g}),_.watch.next({values:g})}d={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!V.isValid||!!a.keepIsValid,y.watch=!!e.shouldUnregister,_.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:a.keepDirty||a.keepDirtyValues?r.isDirty:!!(a.keepDefaultValues&&!se(i,n)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:a.keepDirty||a.keepDirtyValues?r.dirtyFields:a.keepDefaultValues&&i?Ue(n,i):{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(i,a={})=>{c(s,i)&&(C(a.defaultValue)?Z(i,c(n,i)):(Z(i,a.defaultValue),D(n,i,a.defaultValue)),a.keepTouched||M(r.touchedFields,i),a.keepDirty||(M(r.dirtyFields,i),r.isDirty=a.defaultValue?v(i,c(n,i)):v()),a.keepError||(M(r.errors,i),V.isValid&&z()),_.state.next({...r}))},clearErrors:Fr,unregister:Fe,setError:vr,setFocus:(i,a={})=>{const l=c(s,i)._f,f=l.refs?l.refs[0]:l.ref;f.focus(),a.shouldSelect&&f.select()},getFieldState:Ke}}function Nr(e={}){const t=F.useRef(),[r,s]=F.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...Pr(e),formState:r};const n=t.current.control,o=F.useCallback(y=>{ar(y,n._proxyFormState,!0)&&(n._formState={...n._formState,...y},s({...n._formState}))},[n]);return me({subject:n._subjects.state,callback:o}),F.useEffect(()=>{n._stateFlags.mount||(n._proxyFormState.isValid&&n._updateValid(),n._stateFlags.mount=!0),n._stateFlags.watch&&(n._stateFlags.watch=!1,n._subjects.state.next({})),n._removeUnmounted()}),t.current.formState=nr(r,n._proxyFormState),t.current}var $r=Object.freeze(Object.defineProperty({__proto__:null,Controller:Sr,FormProvider:kr,appendErrors:dr,get:c,set:D,useController:fr,useFieldArray:Rr,useForm:Nr,useFormContext:ue,useFormState:ur,useWatch:cr},Symbol.toStringTag,{value:"Module"}));export{Sr as C,$r as R,Nr as u};
