import{r as l}from"./vendor.ad6d6790.js";function V(e,r){if(e>r)return V(r,e).reverse();const a=[];for(let n=e;n<=r;n++)a.push(n);return a}function m(e,r){return("0".repeat(r-1)+e.toString()).slice(-r)}function b(e,r,a){if(r<1||12<r||a<1||31<a)return null;const n=m(e,4)+"-"+m(r,2)+"-"+m(a,2),c=new Date(n);return c.getFullYear()!==e||c.getMonth()!==r-1||c.getDate()!==a?null:n}function C(e){const r=new Date(e),a=r.getFullYear(),n=r.getMonth()+1,c=r.getDate();return isNaN(a)||isNaN(n)||isNaN(c)?{year:"",month:"",day:""}:{year:a.toString(),month:n.toString(),day:c.toString()}}const v=1960,M=new Date().getFullYear();function p(e){return parseInt(e)}function f(e){return e.toString()}function h(e){return{value:e,label:e}}const A=V(1,12).map(e=>h(f(e))),E=V(1,31).map(e=>h(f(e))),k=(e,r,a={})=>{const[n,c]=l.exports.useState({yearValue:a.defaultYear?f(a.defaultYear):"",monthValue:a.defaultMonth?f(a.defaultMonth):"",dayValue:a.defaultDay?f(a.defaultDay):"",dateString:null,changeCount:0}),g=l.exports.useCallback(({year:t,month:u,day:s})=>{c(o=>{const i=t!=null?t:o.yearValue,x=u!=null?u:o.monthValue,S=s!=null?s:o.dayValue,Y=b(p(i),p(x),p(S));return{yearValue:i,monthValue:x,dayValue:S,dateString:Y,changeCount:o.changeCount+1}})},[]),d=l.exports.useRef(!1);l.exports.useEffect(()=>{!d.current||r(n.dateString||"")},[n.changeCount]),l.exports.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]);const D=l.exports.useMemo(()=>{const t=a.minYear!=null?a.minYear:v,u=a.maxYear!=null?a.maxYear:M,s=V(t,u).map(o=>{const i=f(o);return{value:i,label:i}});return s.some(o=>o.value===n.yearValue)?s:s.concat(h(n.yearValue))},[a.minYear,a.maxYear,n.yearValue]),y=l.exports.useCallback(t=>{const{year:u,month:s,day:o}=C(t);c(i=>({yearValue:u,monthValue:s,dayValue:o,dateString:t,changeCount:i.changeCount}))},[]);return l.exports.useEffect(()=>{if(typeof e!="string")return;(n.dateString||"")!==e&&y(e)},[y,n.dateString,e]),{yearValue:n.yearValue,monthValue:n.monthValue,dayValue:n.dayValue,yearOptions:D,monthOptions:A,dayOptions:E,onYearChange:l.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value;g({year:u})},[g]),onMonthChange:l.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value;g({month:u})},[g]),onDayChange:l.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value;g({day:u})},[g]),dateValue:n.dateString,onDateChange:l.exports.useCallback(t=>{const u=typeof t=="string"?t:t.target.value,{year:s,month:o,day:i}=C(u);g({year:s,month:o,day:i})},[g]),setDate:y}};export{k as u};
